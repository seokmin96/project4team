<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.buttybutty.home.dao.MarketDAO">
	<select id="totalRecord" resultType="int">
		select count(ma_num) cnt from market_data
		<if test="searchWord != null">
			where ${searchKey} like '%${searchWord}%'
		</if>
	</select>
	<select id="marketAllSelect" resultType="com.buttybutty.home.dto.MarketDTO">
		select * from
			(select * from
				(select * from market_data 
				<if test="searchWord != null">
					where ${searchKey} like '%${searchWord}%' 
				</if>
				order by ma_num desc) 
			where <![CDATA[rownum <= ${nowPage*onePageRecord}]]>
			order by ma_num asc)
		where <![CDATA[rownum <= ${lastPageRecord}]]>
		order by ma_num desc
	</select>

</mapper>